import PropTypes from 'prop-types'
import React, { useEffect, useState } from 'react'

export function WordlistInput({ wordlists, title, onChange }) {

  const [useWordlist, setUseWordlist] = useState(false)
  const [text, setText] = useState('')
  const [wordlist, setWordlist] = useState(wordlists[0])

  useEffect(() => onChange && onChange({ useWordlist, text, wordlist }), [useWordlist, text, wordlist])

  return (
    <fieldset style={{ padding: 10, margin: 10 }}>
      <legend>{title}</legend>
      {!useWordlist && <input disabled={useWordlist} onChange={e => setText(e.target.value)} />}
      {
        useWordlist && wordlists &&
        <select style={{ width: 200 }} onChange={e => setWordlist(e.target.value)}>
          {wordlists.map((w, i) => <option key={i + ''} value={w}>{w}</option>)}
        </select>
      }
      <input style={{ margin: 10 }} type="checkbox" onChange={e => setUseWordlist(e.target.checked)} />
      <span style={{ fontSize: 14 }}>Use wordlist</span>
    </fieldset>
  )
}

WordlistInput.propTypes = {
  wordlists: PropTypes.array.isRequired,
  title: PropTypes.string.isRequired,
  onChange: PropTypes.func
}