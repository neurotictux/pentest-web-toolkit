import React, { useState, useEffect } from 'react'

import { historyService } from '../../services'
import { HistoryItem } from '../../components'

export function History() {

  const [history, setHistory] = useState([])
  const [showing, setShowing] = useState(0)

  useEffect(() => {
    historyService.get().then(res => {
      setHistory(res)
    })
  }, [])

  return (
    <div>
      <h5>Command History</h5>
      {history.map((p, i) => <HistoryItem
        details={showing === p.id}
        onClick={id => setShowing(id === showing ? 0 : id)}
        key={i}
        command={p} />)}
    </div>
  )
}