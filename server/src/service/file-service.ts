import { readdirSync, writeFileSync } from 'fs'
import { join } from 'path'
import { IRequestFile } from '../interfaces'
import { mkDirIfNotExists } from '../utils'

const uploadDir = 'uploads'
const wordlistsDir = join(uploadDir, 'wordlists')

mkDirIfNotExists(uploadDir)
mkDirIfNotExists(wordlistsDir)

export class FileService {
  saveWordlist(file: IRequestFile) {
    writeFileSync(join(wordlistsDir, file.name), file.data)
  }

  listWordlists() {
    return readdirSync(wordlistsDir)
  }
}